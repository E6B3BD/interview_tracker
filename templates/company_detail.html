{% extends "base.html" %}

{% block content %}
<h2>{{ company.name }} - é¢è¯•é¢˜åº“</h2>

<p><strong>åŸå¸‚ï¼š</strong>{{ company.city or 'æœªå¡«å†™' }}</p>
<p><strong>æ€§è´¨ï¼š</strong>{{ company.nature or 'æœªå¡«å†™' }}</p>
<!-- å®˜ç½‘/åœ°å€é“¾æ¥ï¼ˆä»…å½“æ˜¯æœ‰æ•ˆ URL æ—¶æ˜¾ç¤ºå›¾æ ‡ï¼‰ -->
{% if company.address and (company.address.startswith('http://') or company.address.startswith('https://')) %}
  <p>
    <a href="{{ company.address }}" target="_blank" rel="noopener" title="è®¿é—®å…¬å¸å®˜ç½‘">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg text-primary" viewBox="0 0 16 16">
        <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.586.586l-.586.586a1 1 0 0 1-1.414 0z"/>
        <path d="M6.542 4.715a3 3 0 0 1 4.243 0l1.372 1.371a1 1 0 0 1-1.414 1.414L9.357 6.114a1 1 0 0 0-1.414 0L6.556 7.5a1 1 0 0 1-1.414-1.414l.586-.586a1 1 0 0 0 0-1.414z"/>
      </svg>
      è®¿é—®å®˜ç½‘
    </a>
  </p>
{% elif company.address %}
  <!-- å¦‚æœåœ°å€å­˜åœ¨ä½†ä¸æ˜¯ URLï¼ˆå¦‚â€œåŒ—äº¬å¸‚æµ·æ·€åŒºxxxâ€ï¼‰ï¼Œå¯é€‰æ‹©éšè—æˆ–æç¤º -->
  <!-- æ­¤å¤„æŒ‰ä½ çš„è¦æ±‚ï¼šä¸æ˜¾ç¤ºæ˜æ–‡ï¼Œæ‰€ä»¥æ³¨é‡Šæ‰ -->
  <!-- <p class="text-muted"><small>ğŸ“ åœ°å€å·²è®°å½•ï¼ˆéå…¬å¼€é“¾æ¥ï¼‰</small></p> -->
{% endif %}
<p><strong>æè¿°ï¼š</strong>{{ company.description or 'æ— ' }}</p>

<!-- æ˜¾ç¤ºå…·ä½“å‚ä¸ç”¨æˆ· -->
<h4>å‚ä¸ç”¨æˆ·ï¼ˆ{{ participants|length }}äººï¼‰</h4>
{% if participants %}
  <div class="mb-3">
    {% for user in participants %}
      <span class="badge bg-info text-dark me-1 mb-1">{{ user }}</span>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">æš‚æ— ç”¨æˆ·å‚ä¸è®°å½•ã€‚</p>
{% endif %}

<hr>

<!-- æŒ‰è½®æ¬¡åˆ†ç»„æ˜¾ç¤ºé—®é¢˜ -->
{% for round_name, qs in grouped_records.items() %}
  <div class="mt-4">
    <h3 class="bg-light p-2 rounded">{{ round_name }}</h3>
    {% for item in qs %}
      <div class="card mb-2">
        <div class="card-body p-3">
          <div><strong>Q:</strong> {{ item.question }}</div>
          <div class="mt-1"><strong>A:</strong> {{ item.answer }}</div>
          <small class="text-muted d-block mt-2">
            â€” {{ item.username }} Â· {{ item.created_at.strftime('%Y-%m-%d %H:%M') }}
          </small>
        </div>
      </div>
    {% endfor %}
  </div>
{% endfor %}

<div class="mt-3">
  <a href="{{ url_for('add_interview', cid=company.id) }}" class="btn btn-primary">+ æäº¤æ–°é—®é¢˜</a>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">è¿”å›é¦–é¡µ</a>
</div>

{% endblock %}