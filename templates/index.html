{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>å…¬å¸åˆ—è¡¨</h2>
  <a href="{{ url_for('add_company_route') }}" class="btn btn-success">+ æ·»åŠ å…¬å¸</a>
</div>

{% if companies %}
  <div class="list-group">
    {% for c in companies %}
    <div class="list-group-item list-group-item-action flex-column align-items-start">
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1">
          {{ c.name }}  <!-- çº¯æ–‡æœ¬ï¼Œä¸å†åŒ…è£¹åœ¨ <a> ä¸­ -->
        </h5>
        <small>
          {% if c.nature == 'è‡ªç ”' %}ğŸ­ è‡ªç ”{% elif c.nature == 'å¤–åŒ…' %}ğŸ§¾ å¤–åŒ…{% else %}{{ c.nature or 'â€”' }}{% endif %}
        </small>
      </div>
      <p class="mb-1 text-muted">
        ğŸ“ {{ c.city or 'æœªçŸ¥åŸå¸‚' }}
      </p>
      <p class="mb-1">
        ğŸ“Œ {{ c.description[:80] ~ ('...' if c.description|length > 80 else '') }}
      </p>
      <div class="mt-2">
        <!-- æ–°å¢â€œè¯¦æƒ…â€æŒ‰é’® -->
        <a href="{{ url_for('company_detail', cid=c.id) }}" class="btn btn-sm btn-outline-info">è¯¦æƒ…</a>
        
        <a href="{{ url_for('add_interview', cid=c.id) }}" class="btn btn-sm btn-outline-primary">å‚åŠ é¢è¯•</a>
        
        {% if session.role == 'root' %}
        <a href="{{ url_for('delete_company_route', cid=c.id) }}"
           class="btn btn-sm btn-outline-danger"
           onclick="return confirm('ç¡®å®šåˆ é™¤å…¬å¸åŠæ‰€æœ‰è®°å½•ï¼Ÿ')">åˆ é™¤</a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">æš‚æ— å…¬å¸ä¿¡æ¯ï¼Œ<a href="{{ url_for('add_company_route') }}">ç«‹å³æ·»åŠ </a>ã€‚</p>
{% endif %}

{% endblock %}